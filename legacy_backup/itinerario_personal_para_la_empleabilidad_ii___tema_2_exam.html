<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ITINERARIO PERSONAL PARA LA EMPLEABILIDAD II - TEMA 2 ¬∑ Examen Online</title>
  <style>:root{--bg:#1a3b2a;--panel:rgba(20,40,30,.88);--text:#d1f5e5;--muted:#b1d3c3;--cyan:#aed581;--magenta:#9ccc65;--violet:#8bc34a;--blue:#7cb342;--amber:#dce775;--orange:#ffee58;--green:#c5e1a5;--red:#ef9a9a;--shadow:0 0 15px rgba(174,213,129,.3),0 0 25px rgba(139,195,74,.4);} body{background: repeating-linear-gradient( -45deg, #2a4b3a, #2a4b3a 5px, transparent 5px, transparent 25px ); background-attachment:fixed;}
    html{scrollbar-width:none;scroll-behavior:smooth}
    body::-webkit-scrollbar{display:none}
    body{margin:0;padding:12px;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;min-height:100vh;display:flex;flex-direction:column;gap:18px;overflow-x:hidden}
    aside#dashboard{order:2;background:var(--panel);border:1px solid rgba(255,255,255,.2);border-radius:14px;box-shadow:var(--shadow);backdrop-filter:blur(6px);padding:16px;display:flex;flex-direction:column;gap:14px}
    aside#dashboard{scrollbar-width:thin;scrollbar-color:var(--cyan) rgba(10,8,30,.6)}aside#dashboard::-webkit-scrollbar{width:8px}aside#dashboard::-webkit-scrollbar-track{background:rgba(10,8,30,.6);border-radius:10px}aside#dashboard::-webkit-scrollbar-thumb{background-color:var(--cyan);border-radius:10px;border:2px solid transparent;background-clip:content-box}aside#dashboard::-webkit-scrollbar-thumb:hover{background-color:var(--violet)}
    .card{border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px;background:rgba(10,8,30,.6)}
    .row{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .muted{color:var(--muted);font-size:.9rem}
    .ring{width:120px;height:120px;margin:4px auto;position:relative}
    .ring svg{transform:rotate(-90deg);width:120px;height:120px;display:block}
    .ring .label{position:absolute;inset:0;display:grid;place-items:center;font-weight:800}
    .stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .badge{border-radius:8px;padding:8px 10px;text-align:center;font-weight:800}
    .ok{color:var(--green);border:1px solid rgba(0,255,127,.5);text-shadow:0 0 6px rgba(0,255,127,.6)}
    .ko{color:var(--red);border:1px solid rgba(255,69,0,.5);text-shadow:0 0 6px rgba(255,69,0,.6)}
    .sk{color:var(--amber);border:1px solid rgba(255,215,0,.5);text-shadow:0 0 6px rgba(255,215,0,.6)}
    .sc{color:var(--cyan);border:1px solid rgba(0,255,255,.5);text-shadow:0 0 6px rgba(0,255,255,.6)}
    .controls{display:none !important} .settings{display:none!important}
    button{padding:10px 14px;font-size:.98rem;font-weight:800;border:none;border-radius:10px;color:#fff;cursor:pointer;transition:transform .15s,box-shadow .2s;text-shadow:0 0 5px rgba(255,255,255,.7);background:linear-gradient(145deg,#4a00e0,#8e2de2);box-shadow:0 4px 0 rgba(30,0,60,.8),0 6px 15px rgba(0,0,0,.4)}
    button:hover{transform:translateY(-2px);box-shadow:0 4px 0 rgba(30,0,60,.8),0 6px 20px rgba(0,0,0,.5),0 0 15px var(--magenta),0 0 25px var(--magenta)}
    .btn-blue{background:linear-gradient(145deg,#00bfff,#1e90ff)}.btn-amber{background:linear-gradient(145deg,#ff8c00,#ffa500)}.btn-red{background:linear-gradient(145deg,#ff4b2b,#ff416c)}
    main{order:1;display:flex;justify-content:center;align-items:flex-start}
    #quiz-container{background:var(--panel);padding:18px 14px;border-radius:15px;box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.3);width:100%;backdrop-filter:blur(6px);box-sizing:border-box}
    h1{text-align:center;color:#fff;margin:0 0 8px;font-weight:900;letter-spacing:.4px;text-shadow:0 0 8px var(--primary-shadow,.7),0 0 12px var(--primary-shadow,.5);font-size:1.5rem;}
    #live-stats-container{display:flex;flex-wrap:wrap;justify-content:space-around;gap:8px;border:1px solid rgba(255,255,255,.15);border-radius:8px;background:rgba(10,8,30,.7);padding:8px;margin-bottom:16px;font-size:.9rem}
    #question-counter{font-size:.95rem;color:var(--cyan);text-align:right;margin:6px 0 10px;text-shadow:0 0 5px rgba(0,255,255,.5)}
    #question-text{font-size:1.1rem;font-weight:800;margin-bottom:12px;color:#f5f5f5;text-shadow:1px 1px 2px rgba(0,0,0,.5)}
    #options-container{display:grid;gap:10px;margin-bottom:10px}
    .option{display:flex;align-items:center;gap:10px;padding:12px 14px;border:1px solid rgba(75,0,130,.7);border-radius:10px;cursor:pointer;background:rgba(48,43,99,.6);transition:.2s; position: relative;}
    .option:hover{background:rgba(75,0,130,.7);border-color:var(--cyan);box-shadow:0 0 8px rgba(0,255,255,.4)}
    .option input[type=radio]{accent-color:var(--cyan);transform:scale(1.2)}
    
    /* FEEDBACK STYLES */
    .option.revealed-correct {
        border: 2px solid var(--green) !important;
        background: rgba(0, 255, 127, 0.15) !important;
        box-shadow: 0 0 10px rgba(0, 255, 127, 0.3) !important;
    }
    .option.revealed-correct::after {
        content: "‚úÖ Correcta";
        position: absolute;
        right: 12px;
        color: var(--green);
        font-weight: 800;
        font-size: 0.9rem;
    }
    .option.revealed-wrong {
        border: 2px solid var(--red) !important;
        background: rgba(255, 69, 0, 0.15) !important;
    }
    .option.revealed-wrong::after {
        content: "‚ùå Tu respuesta";
        position: absolute;
        right: 12px;
        color: var(--red);
        font-weight: 800;
        font-size: 0.9rem;
    }

    #timer-bar{height:6px;border-radius:6px;background:rgba(255,255,255,.15);overflow:hidden;margin:6px 0 0}
    #timer-fill{height:100%;width:100%;background:linear-gradient(90deg,var(--cyan),var(--green));box-shadow:0 0 10px rgba(0,255,255,.6)}
    #feedback-container{margin-top:10px;padding:14px;border-radius:10px;font-weight:800;border:2px solid transparent;box-shadow:0 0 10px rgba(255,255,255,.15)}
    .feedback-correct{background:rgba(0,255,127,.12);border-color:var(--green);color:var(--green)}
    .feedback-incorrect{background:rgba(255,69,0,.12);border-color:var(--red);color:var(--red)}
    .feedback-skipped{background:rgba(255,215,0,.12);border-color:var(--amber);color:var(--amber)}
    .feedback-explanation{font-weight:600;margin-top:10px;font-size:.95rem;color:#f0f0f0;text-shadow:none}
    .feedback-fundamento{display:block;margin-top:6px}
    #navigation-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin-top:14px}
    .hidden{display:none!important}
    .option.disabled{cursor:default;background:rgba(60,60,60,.6)!important;color:#aaa!important;border-color:#555!important;box-shadow:none!important}
    #score-container{text-align:center;font-size:1.05rem;margin-top:10px;padding:18px;background:rgba(15,12,41,.9);border-radius:14px;border:1px solid var(--violet);box-shadow:0 0 15px rgba(142,45,226,.35)}
    
    /* BREAKDOWN STYLES */
    #score-breakdown{margin-top:20px;text-align:left;font-size:.95rem;max-height:60vh;overflow-y:auto;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:12px;background:rgba(0,0,0,0.25);}
    .review-item { margin-bottom: 16px; padding: 14px; border: 1px solid rgba(255,255,255,0.1); background: rgba(30,30,40,0.4); border-radius: 10px; }
    .review-item.is-wrong { border-left: 4px solid var(--red); }
    .review-item.is-skipped { border-left: 4px solid var(--amber); }
    .review-q { font-weight: 800; margin-bottom: 8px; color: #fff; line-height: 1.4; }
    .review-row { display: flex; flex-direction: column; gap: 4px; font-size: 0.95rem; }
    .review-my-ans { color: var(--red); }
    .review-my-ans.skipped { color: var(--amber); }
    .review-correct-ans { color: var(--green); font-weight: 700; }
    .review-exp { margin-top: 10px; font-size: 0.9rem; color: #d1d5db; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px; line-height: 1.5; font-style: italic; }

    .navigator{display:grid;grid-template-columns:repeat(auto-fill,minmax(36px,1fr));gap:6px;margin:8px 0 12px}
    .pill{font-size:.9rem;padding:6px;border-radius:8px;text-align:center;border:1px solid rgba(255,255,255,.12);background:rgba(20,16,48,.6);color:var(--muted)}
    .pill.ok{color:var(--green);border-color:rgba(0,255,127,.4)}.pill.ko{color:var(--red);border-color:rgba(255,69,0,.4)}.pill.sk{color:var(--amber);border-color:rgba(255,215,0,.4)}.pill.cur{outline:2px solid var(--cyan);color:#fff}
    .toast{position:fixed;bottom:16px;right:16px;background:rgba(20,16,48,.95);color:var(--text);border:1px solid rgba(0,255,255,.35);border-radius:10px;padding:10px 12px;box-shadow:var(--shadow);z-index:99}
    #final-overlay{position:fixed;inset:0;background:radial-gradient(1200px 600px at 50% 10%,rgba(0,255,255,.25),transparent 60%),radial-gradient(1200px 600px at 50% 90%,rgba(193,53,132,.25),transparent 60%),rgba(8,6,24,.96);display:grid;place-items:center;z-index:200;padding:12px}
    #final-card{border:1px solid rgba(0,255,255,.5);border-radius:18px;padding:24px 16px;background:rgba(15,12,41,.88);box-shadow:0 0 30px rgba(0,255,255,.2),0 0 45px rgba(193,53,132,.18);text-align:center;max-width:720px;width:min(92%,720px)}
    #final-title{font-size:1.8rem;font-weight:900;letter-spacing:.4px;text-shadow:0 0 12px rgba(0,255,255,.7)}
    #final-score-big{font-size:3.5rem;font-weight:900;margin:6px 0 12px}
    #final-msg{color:var(--muted);margin-bottom:14px}
    #final-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .grade-green{color:var(--green);text-shadow:0 0 18px rgba(0,255,127,.6)}.grade-cyan{color:var(--cyan);text-shadow:0 0 18px rgba(0,255,255,.6)}.grade-amber{color:var(--amber);text-shadow:0 0 18px rgba(255,215,0,.6)}.grade-red{color:var(--red);text-shadow:0 0 18px rgba(255,69,0,.6)}
    .confetti{position:fixed;top:-10px;width:8px;height:14px;opacity:.9;transform:rotate(15deg);z-index:201}
    @keyframes fallConfetti{to{transform:translateY(110vh) rotate(360deg)}}
    
    @media (min-width:980px){
        body{padding:18px;height:100vh;overflow:hidden;display:grid;grid-template-columns:320px 1fr}
        aside#dashboard{order:initial;overflow-y:auto}
        main{order:initial}
        #quiz-container{padding:22px 18px}
        h1{font-size:1.7rem}
        #question-text{font-size:1.2rem}
        #final-card{padding:28px 24px}
        #final-title{font-size:2.2rem}
        #final-score-big{font-size:4rem}
    }
    
    @media print{body{background:none;display:block;padding:0}aside#dashboard{display:none}#quiz-container{box-shadow:none;border:0}#final-overlay{display:none!important}}
  </style>
</head>
<body>
  <aside id="dashboard" aria-label="Panel de control del examen">
    <div class="card">
      <div class="ring" aria-hidden="true">
        <svg viewBox="0 0 120 120">
          <circle cx="60" cy="60" r="52" fill="none" stroke="rgba(255,255,255,.1)" stroke-width="10"></circle>
          <circle id="ring-progress" cx="60" cy="60" r="52" fill="none" stroke="var(--cyan)" stroke-width="10" stroke-linecap="round" stroke-dasharray="327" stroke-dashoffset="327" style="filter:drop-shadow(0 0 6px rgba(0,255,255,.8))"></circle>
        </svg>
        <div class="label"><span id="ring-label">0%</span></div>
      </div>
      <div class="row"><span class="muted">Pregunta</span><strong id="ring-step">1 / 0</strong></div>
      <div class="row"><span class="muted">Precisi√≥n</span><strong id="ring-acc">0%</strong></div>
      <div class="row"><span class="muted">Penalizaci√≥n T</span><strong id="ring-T">3</strong></div>
      <div class="row"><span class="muted">Tiempo</span><strong id="ring-time">‚Äî</strong></div>
    </div>
    <div class="card">
      <div class="stat-grid">
        <div class="badge ok">Aciertos <span id="s-ok">0</span></div>
        <div class="badge ko">Fallos <span id="s-ko">0</span></div>
        <div class="badge sk">Omitidas <span id="s-sk">0</span></div>
        <div class="badge sc">Puntuaci√≥n <span id="s-sc">0.00</span>/10</div>
      </div>
    </div>
    <div class="card">
      <div id="mini-nav" class="navigator" aria-label="Estado de preguntas"></div>
    </div>
  </aside>

  <main>
    <section id="quiz-container" role="region" aria-label="Examen">
      <h1>ITINERARIO PERSONAL PARA LA EMPLEABILIDAD II - TEMA 2</h1>
      <div id="live-stats-container" aria-live="polite">
        <span class="stat-item">Aciertos: <strong id="live-correct" class="stat-correct">0</strong></span>
        <span class="stat-item">Fallos: <strong id="live-incorrect" class="stat-incorrect">0</strong></span>
        <span class="stat-item">Omitidas: <strong id="live-skipped" class="stat-skipped">0</strong></span>
        <span class="stat-item">Puntuaci√≥n: <strong id="live-score" class="stat-score">0.00</strong></span>
      </div>
      
      <!-- Exam Elements -->
      <div id="question-counter"></div>
      <div id="question-text"></div>
      <div id="options-container" role="radiogroup" aria-label="Opciones de respuesta"></div>
      <div id="timer-bar" class="hidden"><div id="timer-fill"></div></div>
      <div id="feedback-container" class="hidden" aria-live="polite"></div>
      <div id="navigation-buttons">
        <button id="submit-btn">Responder</button>
        <button id="skip-btn" class="btn-amber">Pasar Pregunta</button>
        <button id="next-btn" class="hidden btn-blue">Siguiente Pregunta</button>
        <button id="restart-btn" class="hidden btn-blue">Reiniciar Examen</button>
      </div>

      <!-- Score Elements (Hidden by default) -->
      <div id="score-container" class="hidden" aria-live="polite">
        <h2>¬°Examen finalizado!</h2>
        <div style="display:flex; justify-content:center; gap:16px; margin:16px 0;">
            <p>Aciertos: <strong id="counts-correct" style="color:var(--green)">0</strong></p>
            <p>Fallos: <strong id="counts-incorrect" style="color:var(--red)">0</strong></p>
            <p>Omitidas: <strong id="counts-skipped" style="color:var(--amber)">0</strong></p>
        </div>
        <p>Tu puntuaci√≥n final es: <strong id="final-score" style="font-size:1.4em;">0.00</strong> / 10</p>
        
        <h3 style="margin-top:24px; color:var(--cyan); border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:8px;">Repaso de Errores</h3>
        <div id="score-breakdown"></div>
        
        <div style="margin-top:20px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap">
          <button id="restart-btn-2">Reiniciar Examen</button>
        </div>
      </div>
    </section>
  </main>

  <div id="final-overlay" class="hidden" role="dialog" aria-modal="true">
    <div id="final-card">
      <div id="final-title">Resultado del examen</div>
      <div id="final-score-big" class="grade-cyan">0.00</div>
      <div id="final-msg"></div>
      <div id="final-actions">
        <button id="ovl-restart" class="btn-red">Reiniciar</button>
        <button id="ovl-close">Cerrar</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden" role="status"></div>

<script type="application/json" id="quiz-data">{
  "title": "ITINERARIO PERSONAL PARA LA EMPLEABILIDAD II - TEMA 2",
  "items": [
    {
      "question": "¬øCu√°l es el enfoque integral de la gesti√≥n del talento en el √°mbito de Recursos Humanos seg√∫n el texto?",
      "options": [
        "Sustituir a los empleados con bajo rendimiento por nuevos perfiles externos.",
        "Atraer, retener y potenciar a empleados con habilidades excepcionales para el √©xito de la empresa.",
        "Reducir los costes de contrataci√≥n mediante la automatizaci√≥n de procesos.",
        "Priorizar √∫nicamente la formaci√≥n t√©cnica sobre la gesti√≥n del desempe√±o."
      ],
      "correctAnswer": 1,
      "explanation": "La gesti√≥n del talento pretende atraer, retener y potenciar a empleados con habilidades excepcionales para contribuir al √©xito y eficacia. (Fuente: P√°gina 3, Secci√≥n: 1. Introducci√≥n y contextualizaci√≥n pr√°ctica)"
    },
    {
      "question": "En el proceso de selecci√≥n, ¬øcu√°l es la meta final respecto al candidato?",
      "options": [
        "Seleccionar al profesional con m√°s t√≠tulos acad√©micos del mercado.",
        "Escoger al candidato que acepte el salario m√°s bajo de la horquilla.",
        "Seleccionar al profesional m√°s destacado en el mercado laboral global.",
        "Escoger a aquel que cumpla de manera m√°s integral con los requisitos espec√≠ficos (el m√°s adecuado)."
      ],
      "correctAnswer": 3,
      "explanation": "La meta no consiste en seleccionar al m√°s destacado del mercado, sino al m√°s adecuado que cumpla integralmente los requisitos. (Fuente: P√°gina 4, Secci√≥n: 2. Sistemas de selecci√≥n de personal)"
    },
    {
      "question": "Dentro de los actores de la selecci√≥n, ¬øqui√©nes pueden ser los encargados de realizarla?",
      "options": [
        "√önicamente agencias de empleo externas privadas.",
        "Solo los directores generales de la compa√±√≠a de forma exclusiva.",
        "El Departamento de RRHH propio, una empresa externa o incluso los directores en empresas peque√±as.",
        "Cualquier empleado de la plantilla elegido al azar por sorteo."
      ],
      "correctAnswer": 2,
      "explanation": "Pueden ser de RRHH, empresas externas (consultor√≠as, ETT) o los propios directores en empresas peque√±as. (Fuente: P√°gina 4, Secci√≥n: 2. Sistemas de selecci√≥n de personal)"
    },
    {
      "question": "¬øEn qu√© consiste el modelo de selecci√≥n basado en competencias?",
      "options": [
        "Identificar y evaluar habilidades t√©cnicas, habilidades blandas y atributos de personalidad espec√≠ficos para el puesto.",
        "Evaluar exclusivamente el coeficiente intelectual de los candidatos mediante tests estandarizados.",
        "Centrarse √∫nicamente en los a√±os de experiencia previa en puestos id√©nticos.",
        "Fomentar la competitividad agresiva entre los candidatos durante las pruebas grupales."
      ],
      "correctAnswer": 0,
      "explanation": "Este modelo identifica competencias t√©cnicas, blandas y atributos de personalidad necesarios para un puesto. (Fuente: P√°gina 4, Secci√≥n: 2. Sistemas de selecci√≥n de personal)"
    },
    {
      "question": "¬øCu√°l es la primera fase del proceso de selecci√≥n de personal?",
      "options": [
        "La elaboraci√≥n de la oferta de empleo.",
        "El reclutamiento de candidatos externos.",
        "El an√°lisis de necesidades de empleo.",
        "La criba curricular de los perfiles recibidos."
      ],
      "correctAnswer": 2,
      "explanation": "La Fase I consiste principalmente en realizar un an√°lisis y valoraci√≥n del estado laboral de la empresa. (Fuente: P√°gina 5, Secci√≥n: 3. Fases del proceso de selecci√≥n de personal)"
    },
    {
      "question": "¬øQu√© herramienta permite ver gr√°ficamente la estructura interna, jerarqu√≠as y funciones de una empresa?",
      "options": [
        "El flujograma de ventas.",
        "El organigrama empresarial.",
        "El mapa de procesos externos.",
        "El cronograma de actividades."
      ],
      "correctAnswer": 1,
      "explanation": "El organigrama es una representaci√≥n gr√°fica de la estructura interna que muestra relaciones jer√°rquicas y responsabilidades. (Fuente: P√°gina 5, Secci√≥n: Fase I. An√°lisis de necesidades de empleo)"
    },
    {
      "question": "En una oferta de empleo, ¬øqu√© diferencia hay entre requisitos 'imprescindibles' y 'deseados'?",
      "options": [
        "Los deseados son obligatorios para entrar en el proceso de selecci√≥n.",
        "No existe diferencia real, ambos tienen el mismo peso legal en la contrataci√≥n.",
        "Los imprescindibles son excluyentes; los deseados ayudan a inclinar la balanza entre perfiles similares.",
        "Los imprescindibles se refieren al salario y los deseados a las vacaciones."
      ],
      "correctAnswer": 2,
      "explanation": "Los imprescindibles suponen exclusi√≥n si no se poseen, mientras que los deseados son un factor a√±adido que inclina la balanza. (Fuente: P√°gina 6, Secci√≥n: 4. Fase II. Elaboraci√≥n de la oferta de empleo)"
    },
    {
      "question": "¬øQu√© informaci√≥n sobre el salario se suele incluir actualmente en las ofertas seg√∫n el texto?",
      "options": [
        "Siempre es obligatorio por ley poner la cifra exacta neta mensual.",
        "Puede ser una cantidad concreta, una horquilla o remitir al convenio colectivo.",
        "Nunca se debe mencionar el salario para evitar atraer a candidatos interesados solo en el dinero.",
        "Solo se permite poner el salario m√≠nimo interprofesional vigente."
      ],
      "correctAnswer": 1,
      "explanation": "El salario puede ser una cantidad concreta, una horquilla o remitirse al convenio colectivo del sector. (Fuente: P√°gina 6, Secci√≥n: 4. Fase II. Elaboraci√≥n de la oferta de empleo)"
    },
    {
      "question": "¬øCu√°l es el objetivo principal de la fase de Reclutamiento?",
      "options": [
        "Firmar el contrato de trabajo con el candidato elegido.",
        "Realizar las entrevistas personales definitivas.",
        "Investigar y evaluar las fuentes potenciales (internas y externas) para adquirir recursos humanos.",
        "Despedir al personal que no cumple con los nuevos est√°ndares de la empresa."
      ],
      "correctAnswer": 2,
      "explanation": "Esta fase tiene como objetivo la investigaci√≥n y evaluaci√≥n de las potenciales fuentes para adquirir recursos humanos. (Fuente: P√°gina 7, Secci√≥n: 6. Fase III. Reclutamiento)"
    },
    {
      "question": "¬øPor qu√© es recomendable acudir primero a fuentes internas en el reclutamiento?",
      "options": [
        "Porque es la √∫nica forma legal de contratar en empresas p√∫blicas.",
        "Porque genera efectos positivos como un ambiente laboral saludable y satisfacci√≥n personal.",
        "Porque permite pagar salarios m√°s bajos a los empleados ya existentes.",
        "Porque evita tener que realizar entrevistas de trabajo."
      ],
      "correctAnswer": 1,
      "explanation": "Se recomienda la fuente interna por sus efectos positivos en el ambiente laboral y la satisfacci√≥n de los empleados. (Fuente: P√°gina 7, Secci√≥n: 6. Fase III. Reclutamiento)"
    },
    {
      "question": "Seg√∫n Ana Amo Arturo (2019), ¬øqu√© es el reclutamiento mixto?",
      "options": [
        "El uso de redes sociales y prensa escrita simult√°neamente.",
        "La contrataci√≥n de hombres y mujeres por igual.",
        "El uso de procesos presenciales y virtuales al mismo tiempo.",
        "La combinaci√≥n de fuentes internas y externas en el proceso."
      ],
      "correctAnswer": 3,
      "explanation": "El reclutamiento mixto es aquel en el que se usan tanto fuentes internas como externas. (Fuente: P√°gina 8, Secci√≥n: 6.1. Convocatoria y recepci√≥n de candidaturas)"
    },
    {
      "question": "¬øEn qu√© consiste la 'criba curricular' dentro de la fase de selecci√≥n?",
      "options": [
        "En verificar que los t√≠tulos acad√©micos no sean falsos.",
        "En analizar y filtrar los curr√≠culums para centrarse en los que mejor se ajustan al perfil.",
        "En entrevistar a todos los candidatos que han enviado su CV.",
        "En publicar el curr√≠culum del candidato seleccionado en la web de la empresa."
      ],
      "correctAnswer": 1,
      "explanation": "La criba curricular permite analizar y filtrar los curr√≠culums para reducir el n√∫mero de candidatos a los m√°s aptos. (Fuente: P√°gina 8, Secci√≥n: 7. Fase IV. Selecci√≥n)"
    },
    {
      "question": "¬øCu√°l es la funci√≥n principal de las entrevistas telef√≥nicas previas a la entrevista personal?",
      "options": [
        "Realizar un examen psicot√©cnico completo.",
        "Ayudar en la labor de filtrado confirmando datos b√°sicos e inter√©s del candidato.",
        "Sustituir por completo a la entrevista presencial para ahorrar costes.",
        "Negociar el contrato final antes de conocer al candidato."
      ],
      "correctAnswer": 1,
      "explanation": "Se usan como m√©todo de filtrado para realizar preguntas generales y conocer si las condiciones son del inter√©s del candidato. (Fuente: P√°gina 8, Secci√≥n: 7. Fase IV. Selecci√≥n)"
    },
    {
      "question": "¬øQu√© caracteriza a una entrevista de trabajo 'directa o dirigida'?",
      "options": [
        "El candidato dirige la conversaci√≥n libremente.",
        "No existe ning√∫n tipo de orden ni preguntas preparadas.",
        "Se basa en un guion predefinido con preguntas espec√≠ficas y respuestas precisas.",
        "Se realiza √∫nicamente a trav√©s de videoconferencia."
      ],
      "correctAnswer": 2,
      "explanation": "La entrevista directa se caracteriza por seguir un guion predefinido con preguntas espec√≠ficas. (Fuente: P√°gina 9, Secci√≥n: 8. Tipos de entrevistas)"
    },
    {
      "question": "¬øCu√°l es el objetivo principal de la entrevista por competencias?",
      "options": [
        "Analizar la caligraf√≠a y la firma del postulante.",
        "Evaluar la resistencia f√≠sica del candidato ante situaciones de estr√©s.",
        "Identificar habilidades y comportamientos espec√≠ficos basados en experiencias pasadas.",
        "Comprobar si el candidato tiene conocidos dentro de la empresa."
      ],
      "correctAnswer": 2,
      "explanation": "Busca identificar y analizar habilidades y comportamientos espec√≠ficos que el candidato posee a trav√©s de ejemplos de experiencias pasadas. (Fuente: P√°gina 10, Secci√≥n: 8. Tipos de entrevistas)"
    },
    {
      "question": "¬øA qu√© se refieren las 'soft skills' mencionadas en el √°mbito de las competencias?",
      "options": [
        "A los conocimientos inform√°ticos avanzados de software.",
        "A las habilidades blandas del candidato.",
        "A la capacidad de manejar maquinaria delicada.",
        "A los t√≠tulos acad√©micos obtenidos en el extranjero."
      ],
      "correctAnswer": 1,
      "explanation": "El texto identifica expl√≠citamente las 'soft skills' como habilidades blandas. (Fuente: P√°gina 10, Secci√≥n: 8. Tipos de entrevistas)"
    },
    {
      "question": "En el Caso Pr√°ctico 2, ¬øqu√© competencias clave buscaba Juan para el puesto de editor senior?",
      "options": [
        "Capacidad de contabilidad y gesti√≥n financiera.",
        "Liderazgo editorial, resoluci√≥n de problemas y adaptabilidad.",
        "Habilidades de dise√±o gr√°fico y programaci√≥n web.",
        "Dominio de idiomas antiguos y archiv√≠stica."
      ],
      "correctAnswer": 1,
      "explanation": "Juan se centra en identificar competencias como liderazgo editorial, resoluci√≥n de problemas y adaptabilidad. (Fuente: P√°gina 10, Secci√≥n: 9. Caso pr√°ctico 2: ‚ÄúEntrevista por competencias‚Äù)"
    },
    {
      "question": "¬øQu√© ocurre inmediatamente despu√©s de que un candidato acepta una propuesta en firme?",
      "options": [
        "Se le nombra directamente directivo de la secci√≥n.",
        "Comienza el proceso de reclutamiento externo de nuevo.",
        "Entra a formar parte de la entidad y pasa por un periodo de adaptaci√≥n y/o prueba.",
        "Debe realizar una nueva serie de entrevistas con los accionistas."
      ],
      "correctAnswer": 2,
      "explanation": "Si el postulante acepta, entra a formar parte de la entidad y pasa por un periodo de adaptaci√≥n y/o prueba. (Fuente: P√°gina 11, Secci√≥n: 10. Fase V. Incorporaci√≥n a la entidad)"
    },
    {
      "question": "¬øCu√°l es el prop√≥sito de asignar un mentor o compa√±ero durante la incorporaci√≥n?",
      "options": [
        "Vigilar al nuevo empleado para que no cometa errores legales.",
        "Sustituir al supervisor directo en todas sus funciones.",
        "Orientar a la nueva incorporaci√≥n para acelerar su integraci√≥n y reducir el estr√©s.",
        "Evaluar secretamente al empleado para decidir su despido inmediato."
      ],
      "correctAnswer": 2,
      "explanation": "El mentor orienta a la nueva incorporaci√≥n durante las primeras semanas para acelerar la integraci√≥n y reducir estr√©s. (Fuente: P√°gina 11, Secci√≥n: 10. Fase V. Incorporaci√≥n a la entidad)"
    },
    {
      "question": "¬øQu√© debe incluirse en la informaci√≥n facilitada al nuevo empleado al incorporarse?",
      "options": [
        "Los datos bancarios de todos sus compa√±eros.",
        "La lista de clientes personales de la competencia.",
        "Objetivos de la empresa, jerarqu√≠a, normas internas y forma de proceder.",
        "Las claves de acceso personales de los directores."
      ],
      "correctAnswer": 2,
      "explanation": "Es imprescindible ofrecer informaci√≥n sobre objetivos, forma de proceder, jerarqu√≠a, normas internas, etc. (Fuente: P√°gina 11, Secci√≥n: 10. Fase V. Incorporaci√≥n a la entidad)"
    },
    {
      "question": "¬øQu√© se recomienda para fomentar el sentido de pertenencia del nuevo empleado?",
      "options": [
        "Involucrarlo en actividades y proyectos de equipo.",
        "Obligarlo a realizar horas extras desde el primer d√≠a.",
        "Evitar que hable con sus compa√±eros hasta que pase el periodo de prueba.",
        "Darle responsabilidades que no correspondan a su cargo."
      ],
      "correctAnswer": 0,
      "explanation": "Se debe involucrar al empleado en actividades y proyectos de equipo para fomentar camarader√≠a y pertenencia. (Fuente: P√°gina 11, Secci√≥n: 10. Fase V. Incorporaci√≥n a la entidad)"
    },
    {
      "question": "¬øQu√© elemento de la oferta de trabajo suele generar desconfianza si se obvia?",
      "options": [
        "El nombre del fundador de la empresa.",
        "Las condiciones salariales (el salario).",
        "El color del logotipo corporativo.",
        "La marca de los ordenadores que se utilizan."
      ],
      "correctAnswer": 1,
      "explanation": "Obviar el salario o remitir solo al convenio puede generar desconfianza y dar mala imagen. (Fuente: P√°gina 6, Secci√≥n: 4. Fase II. Elaboraci√≥n de la oferta de empleo)"
    },
    {
      "question": "¬øCu√°l de estos medios es com√∫n para la difusi√≥n de ofertas en fuentes internas?",
      "options": [
        "Anuncios en radio nacional.",
        "El correo electr√≥nico.",
        "Publicidad en vallas exteriores.",
        "Prensa escrita local."
      ],
      "correctAnswer": 1,
      "explanation": "Para las fuentes internas se suele usar el correo electr√≥nico. (Fuente: P√°gina 8, Secci√≥n: 6.1. Convocatoria y recepci√≥n de candidaturas)"
    },
    {
      "question": "En la Fase IV (Selecci√≥n), ¬øqu√© se busca adem√°s de las capacidades t√©cnicas?",
      "options": [
        "Si la persona podr√° encajar en el equipo y en el ambiente laboral.",
        "Si la persona tiene veh√≠culo propio de alta gama.",
        "Si el candidato vive a menos de 5 kil√≥metros de la oficina.",
        "Si el postulante tiene familiares trabajando en la competencia."
      ],
      "correctAnswer": 0,
      "explanation": "Es necesario valorar si la persona podr√° encajar en el equipo y en el ambiente laboral. (Fuente: P√°gina 5, Secci√≥n: 3. Fases del proceso de selecci√≥n de personal)"
    },
    {
      "question": "¬øQu√© tipo de entrevista se define como una mezcla entre la dirigida y la no dirigida?",
      "options": [
        "Entrevista ciega.",
        "Entrevista de grupo.",
        "Entrevista mixta o semidirigida.",
        "Entrevista de estr√©s."
      ],
      "correctAnswer": 2,
      "explanation": "La entrevista mixta es una mezcla de la directa y la abierta, permitiendo extender respuestas en puntos concretos. (Fuente: P√°gina 9, Secci√≥n: 8. Tipos de entrevistas)"
    },
    {
      "question": "¬øA qui√©n debe dirigirse habitualmente la candidatura seg√∫n la informaci√≥n de contacto de la oferta?",
      "options": [
        "A cualquier empleado de la empresa de forma indistinta.",
        "Al medio de comunicaci√≥n que public√≥ el anuncio.",
        "A la persona o departamento (como RRHH) que especifique la oferta.",
        "Al cliente m√°s antiguo de la entidad."
      ],
      "correctAnswer": 2,
      "explanation": "Se debe expresar de forma clara a qui√©n dirigir el mensaje y el medio para recibir candidaturas. (Fuente: P√°gina 6, Secci√≥n: 4. Fase II. Elaboraci√≥n de la oferta de empleo)"
    },
    {
      "question": "En la Fase I, ¬øqu√© implica realizar un an√°lisis y valoraci√≥n del estado laboral?",
      "options": [
        "Estudiar el organigrama y las caracter√≠sticas de los puestos de trabajo.",
        "Contratar inmediatamente a diez nuevos empleados.",
        "Reducir el salario de todos los trabajadores actuales.",
        "Cambiar la misi√≥n y visi√≥n de la empresa."
      ],
      "correctAnswer": 0,
      "explanation": "Implica procesar informaci√≥n relativa a los puestos del organigrama y sus caracter√≠sticas necesarias. (Fuente: P√°gina 5, Secci√≥n: Fase I. An√°lisis de necesidades de empleo)"
    },
    {
      "question": "¬øQu√© aspecto de las condiciones laborales es muy valorado por las personas que se postulan?",
      "options": [
        "El horario (jornada completa, media, entrada y salida).",
        "El color de las paredes de la oficina.",
        "La marca de la cafetera de la sala de descanso.",
        "El tipo de papel usado en los contratos."
      ],
      "correctAnswer": 0,
      "explanation": "El horario es un aspecto muy valorado por las personas que se postulan. (Fuente: P√°gina 6, Secci√≥n: 4. Fase II. Elaboraci√≥n de la oferta de empleo)"
    },
    {
      "question": "¬øQu√© permite la t√©cnica de gamificaci√≥n en un proceso de selecci√≥n?",
      "options": [
        "Obligar a los candidatos a jugar videojuegos durante toda la jornada.",
        "Evaluar competencias a trav√©s de mec√°nicas de juego.",
        "Sustituir el salario por puntos canjeables en tiendas.",
        "Eliminar la necesidad de tener un Departamento de Recursos Humanos."
      ],
      "correctAnswer": 1,
      "explanation": "Es posible que la empresa pretenda evaluar las competencias de la persona candidata a trav√©s de gamificaci√≥n. (Fuente: P√°gina 4, Secci√≥n: 2. Sistemas de selecci√≥n de personal)"
    },
    {
      "question": "¬øCu√°l es la utilidad del feedback regular durante los primeros meses del empleado?",
      "options": [
        "Aumentar la presi√≥n para que el empleado trabaje m√°s r√°pido.",
        "Justificar el despido al final del periodo de prueba.",
        "Reconocer logros y ofrecer apoyo en √°reas que necesitan mejora.",
        "Comparar p√∫blicamente el rendimiento de todos los nuevos empleados."
      ],
      "correctAnswer": 2,
      "explanation": "El feedback permite reconocer logros y ofrecer apoyo en √°reas de mejora durante los primeros meses. (Fuente: P√°gina 11, Secci√≥n: 10. Fase V. Incorporaci√≥n a la entidad)"
    }
  ]
}</script>

  <script>
  function readEmbeddedJSON(){
    try{
      const el=document.getElementById('quiz-data');
      if(!el) return null;
      const obj=JSON.parse(el.textContent.trim());
      if(!obj||!Array.isArray(obj.items)) return null;
      const h1El=document.querySelector('h1'); if(h1El){ h1El.textContent=obj.title||h1El.textContent; }
      document.title = (obj.title || 'Examen Online') + ' ¬∑ Examen Online';
      return obj.items.map(it=>({question:it.question, options:it.options, correctAnswer:Number(it.correctAnswer), explanation:it.explanation||''}));
    }catch(e){ console.warn('JSON embebido inv√°lido',e); return null }
  }

  let quizData = readEmbeddedJSON() || [];
  const settings = { penaltyMode:'auto', customT:3, timerEnabled:false, timerSeconds:60, shuffleQ:false, shuffleO:false, autoExplain:true };
  let order = Array.from({length:quizData.length},(_,i)=>i);
  let currentQuestionIndex = 0;
  let correctCount = 0, incorrectCount = 0, skippedCount = 0;
  let totalQuestions = quizData.length; const maxScore = 10;
  let results = []; let qStartTime = null;

  const $ = s=>document.querySelector(s);
  const $$ = s=>Array.from(document.querySelectorAll(s));
  
  function getPenaltyT(){ if(totalQuestions===30) return 3; return 3; }
  function computeLiveScore(){ const T=getPenaltyT(); const penalty=incorrectCount/T; const net=Math.max(0,correctCount-penalty); return Math.min(maxScore,(net/totalQuestions)*maxScore) }
  
  function updateRing(){ const answered=correctCount+incorrectCount+skippedCount; const perc=Math.max(0,Math.min(1,answered/totalQuestions)); const len=2*Math.PI*52; const off=len-(len*perc); $('#ring-progress').setAttribute('stroke-dashoffset',off.toFixed(2)); $('#ring-label').textContent=Math.round(perc*100)+'%'; $('#ring-step').textContent=(currentQuestionIndex+1)+' / '+totalQuestions; const acc=answered?correctCount/answered:0; $('#ring-acc').textContent=Math.round(acc*100)+'%'; $('#ring-T').textContent=getPenaltyT(); }
  function updateMiniNav(){ const cont=$('#mini-nav'); cont.innerHTML=''; for(let i=0;i<totalQuestions;i++){ const pill=document.createElement('div'); pill.className='pill'; pill.textContent=String(i+1); const res=results.find(r=>r.qIndex===order[i]); if(res){ pill.classList.add(res.outcome==='ok'?'ok':res.outcome==='ko'?'ko':'sk') } if(i===currentQuestionIndex) pill.classList.add('cur'); cont.appendChild(pill) }}
  function updateLiveStatsBars(){ $('#live-correct').textContent=correctCount; $('#live-incorrect').textContent=incorrectCount; $('#live-skipped').textContent=skippedCount; const s=computeLiveScore(); $('#live-score').textContent=s.toFixed(2); $('#s-ok').textContent=correctCount; $('#s-ko').textContent=incorrectCount; $('#s-sk').textContent=skippedCount; $('#s-sc').textContent=s.toFixed(2) }

  const questionCounterEl=$('#question-counter');
  const questionTextEl=$('#question-text');
  const optionsContainerEl=$('#options-container');
  const feedbackContainerEl=$('#feedback-container');
  const submitBtn=$('#submit-btn');
  const skipBtn=$('#skip-btn');
  const nextBtn=$('#next-btn');
  const scoreContainerEl=$('#score-container');

  const finalOverlay=$('#final-overlay');
  const finalScoreBig=$('#final-score-big');
  const finalMsg=$('#final-msg');

  function currentQ(){ return quizData[order[currentQuestionIndex]] }

  function loadQuestion(){ 
    feedbackContainerEl.className='hidden'; 
    feedbackContainerEl.textContent=''; 
    const q=currentQ(); 
    questionCounterEl.textContent=`Pregunta ${currentQuestionIndex+1} de ${totalQuestions}`; 
    questionTextEl.textContent=q.question; 
    optionsContainerEl.innerHTML=''; 
    
    q.options.forEach((optionText, visibleIdx) => {
        const div = document.createElement('div');
        div.className = 'option';
        const input = document.createElement('input');
        input.type = 'radio';
        input.name = 'answer';
        input.value = String(visibleIdx);
        input.id = `opt${visibleIdx}`;
        const label = document.createElement('label');
        label.htmlFor = input.id;
        label.textContent = optionText;
        div.append(input, label);
        div.addEventListener('click', e => {
            if (e.target !== input && e.target !== label && !input.disabled) {
                input.checked = true;
            }
        });
        optionsContainerEl.appendChild(div);
    });

    submitBtn.classList.remove('hidden'); 
    skipBtn.classList.remove('hidden'); 
    nextBtn.classList.add('hidden'); 
    $('#restart-btn').classList.add('hidden');
    submitBtn.disabled=false; 
    skipBtn.disabled=false; 
    nextBtn.disabled=true; 
    updateMiniNav(); 
    updateRing(); 
  }

  function disableOptions(){ $$('#options-container input[type="radio"]').forEach(i=>i.disabled=true); $$('#options-container .option').forEach(div=>div.classList.add('disabled')) }
  function selectedVisibleIndex(){ const sel=$('#options-container input[name="answer"]:checked'); return sel?Number(sel.value):null }
  function commitResult(outcome,chosenVisibleIdx=null){ const qIdx=order[currentQuestionIndex]; const q=quizData[qIdx]; const rec={qIndex:qIdx,outcome,chosen:chosenVisibleIdx,correct:q.correctAnswer}; results.push(rec) }

  function showFeedback(isCorrect,isSkipped=false){ 
    const q=currentQ(); 
    feedbackContainerEl.classList.remove('hidden'); 
    feedbackContainerEl.classList.remove('feedback-correct','feedback-incorrect','feedback-skipped'); 
    let text=''; 
    if(isSkipped){ 
        feedbackContainerEl.classList.add('feedback-skipped'); 
        text='üü° Pregunta omitida.' 
    } else if(isCorrect){ 
        feedbackContainerEl.classList.add('feedback-correct'); 
        text='‚úÖ ¬°Correcto!' 
    } else { 
        feedbackContainerEl.classList.add('feedback-incorrect'); 
        text='‚ùå Incorrecto.'
        
        // Highlight the correct answer explicitly
        const correctIdx = q.correctAnswer;
        const correctInput = document.getElementById(`opt${correctIdx}`);
        if(correctInput) {
            const container = correctInput.closest('.option');
            if(container) container.classList.add('revealed-correct');
        }
        
        // Highlight the wrong answer chosen
        const chosenIdx = selectedVisibleIndex();
        if(chosenIdx !== null && chosenIdx !== correctIdx) {
            const chosenInput = document.getElementById(`opt${chosenIdx}`);
            if(chosenInput) {
                const container = chosenInput.closest('.option');
                if(container) container.classList.add('revealed-wrong');
            }
        }
    }
    const exp=document.createElement('div'); 
    exp.className='feedback-explanation'; 
    let normExp=(q.explanation||'').trim(); 
    if(normExp){
      let mainExp=normExp, fundText='';
      const idx = normExp.toLowerCase().indexOf('fundamento:');
      if(idx>-1){
        mainExp = normExp.slice(0, idx).trim();
        fundText = normExp.slice(idx + 'fundamento:'.length).trim();
        exp.innerHTML = '<strong>Explicaci√≥n:</strong> ' + mainExp + '<br><span class="feedback-fundamento"><strong>Fundamento:</strong> ' + fundText + '</span>';
      } else {
        exp.innerHTML = '<strong>Explicaci√≥n:</strong> ' + normExp;
      }
    }
    feedbackContainerEl.innerHTML=text; 
    if(normExp) feedbackContainerEl.appendChild(exp); 
    disableOptions(); 
    submitBtn.classList.add('hidden'); 
    skipBtn.classList.add('hidden'); 
    nextBtn.classList.remove('hidden'); 
    nextBtn.disabled=false 
  }

  function submitAnswer(){ 
    const chosen=selectedVisibleIndex(); 
    if(chosen==null){ alert('Por favor, selecciona una respuesta.'); return } 
    submitBtn.disabled=true; 
    skipBtn.disabled=true; 
    const q=currentQ(); 
    const isCorrect=(chosen===q.correctAnswer); 
    if(isCorrect) correctCount++; else incorrectCount++; 
    commitResult(isCorrect?'ok':'ko',chosen); 
    updateLiveStatsBars(); 
    showFeedback(isCorrect) 
  }
  function skipQuestion(){ 
    submitBtn.disabled=true; 
    skipBtn.disabled=true; 
    skippedCount++; 
    commitResult('sk',null); 
    updateLiveStatsBars(); 
    showFeedback(false,true) 
  }
  function nextQuestion(){ 
    nextBtn.disabled=true; 
    currentQuestionIndex++; 
    if(currentQuestionIndex<totalQuestions){ 
        loadQuestion() 
    } else { 
        showFinalScore() 
    } 
  }

  function gradeClass(score){ if(score>=9) return 'grade-green'; if(score>=7) return 'grade-cyan'; if(score>=5) return 'grade-amber'; return 'grade-red' }
  
  function showFinalScore(){
    const finalNota = computeLiveScore();
    
    // Explicitly hide elements by ID to avoid querySelector issues
    ['question-counter', 'question-text', 'options-container', 'navigation-buttons', 'live-stats-container'].forEach(id => {
        const el = document.getElementById(id);
        if(el) el.classList.add('hidden');
    });
    
    const h1 = document.querySelector('h1');
    if(h1) h1.classList.add('hidden');

    $('#counts-correct').textContent=correctCount; 
    $('#counts-incorrect').textContent=incorrectCount; 
    $('#counts-skipped').textContent=skippedCount; 
    $('#final-score').textContent=finalNota.toFixed(2);
    
    // Generate breakdown for incorrect answers
    const breakdownContainer = document.getElementById('score-breakdown');
    breakdownContainer.innerHTML = '';
    
    const wrongResults = results.filter(r => r.outcome !== 'ok');
    
    if (wrongResults.length === 0) {
        breakdownContainer.innerHTML = '<div style="padding:15px; color:var(--green); text-align:center;">¬°Excelente! No tienes fallos.</div>';
    } else {
        wrongResults.forEach(r => {
            const q = quizData[r.qIndex];
            const div = document.createElement('div');
            const isSkipped = r.outcome === 'sk';
            div.className = 'review-item ' + (isSkipped ? 'is-skipped' : 'is-wrong');
            
            const myAns = r.chosen !== null ? q.options[r.chosen] : 'Saltada';
            const correctAns = q.options[q.correctAnswer];
            
            div.innerHTML = `
                <div class="review-q">${q.question}</div>
                <div class="review-row">
                    <div class="review-my-ans ${isSkipped ? 'skipped' : ''}">
                       ${isSkipped ? '‚ö†Ô∏è' : '‚ùå'} Tu respuesta: <strong>${myAns}</strong>
                    </div>
                    <div class="review-correct-ans">
                       ‚úÖ Correcta: <strong>${correctAns}</strong>
                    </div>
                </div>
                <div class="review-exp">${q.explanation || 'Sin explicaci√≥n.'}</div>
            `;
            breakdownContainer.appendChild(div);
        });
    }

    scoreContainerEl.classList.remove('hidden'); 
    
    updateRing();
    
    finalScoreBig.textContent=finalNota.toFixed(2);
    finalScoreBig.className=''; 
    finalScoreBig.classList.add('final-score-big', gradeClass(finalNota));
    finalMsg.textContent = finalNota>=9? 'Excelente rendimiento.': finalNota>=7? 'Muy buen trabajo.': finalNota>=5? 'Aprobado. Puedes mejorar.': 'No alcanzaste el aprobado esta vez.';
    finalOverlay.classList.remove('hidden'); 
    confettiBurst(120);
  }
  
  function restartQuiz(){ 
    currentQuestionIndex=0; 
    correctCount=0; 
    incorrectCount=0; 
    skippedCount=0; 
    results=[]; 
    order=Array.from({length:quizData.length},(_,i)=>i); 
    scoreContainerEl.classList.add('hidden'); 
    
    // Re-show elements
    ['question-counter', 'question-text', 'options-container', 'navigation-buttons', 'live-stats-container'].forEach(id => {
        const el = document.getElementById(id);
        if(el) el.classList.remove('hidden');
    });
    const h1 = document.querySelector('h1');
    if(h1) h1.classList.remove('hidden');

    finalOverlay.classList.add('hidden'); 
    loadQuestion(); 
    updateLiveStatsBars(); 
    updateRing(); 
  }

  function confettiBurst(n=100){
    for(let i=0;i<n;i++){
      const s=document.createElement('div'); s.className='confetti';
      s.style.left=Math.random()*100+'vw';
      s.style.background='hsl('+Math.floor(Math.random()*360)+',90%,60%)';
      s.style.animation='fallConfetti '+(3+Math.random()*2)+'s linear forwards';
      s.style.width=(6+Math.random()*6)+'px'; s.style.height=(10+Math.random()*10)+'px';
      s.style.transform='rotate('+(Math.random()*360)+'deg)';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(),6000);
    }
  }

  document.getElementById('submit-btn').addEventListener('click',submitAnswer);
  document.getElementById('skip-btn').addEventListener('click',skipQuestion);
  document.getElementById('next-btn').addEventListener('click',nextQuestion);
  document.getElementById('restart-btn-2').addEventListener('click',restartQuiz);

  document.getElementById('ovl-restart').addEventListener('click',restartQuiz);
  document.getElementById('ovl-close').addEventListener('click',()=> finalOverlay.classList.add('hidden'));

  document.addEventListener('keydown',e=>{
    const k=e.key.toLowerCase();
    if(k==='enter'){ if(!submitBtn.classList.contains('hidden')) submitAnswer(); else if(!nextBtn.classList.contains('hidden')) nextQuestion(); }
    if(k==='s') { if(!skipBtn.classList.contains('hidden')) skipQuestion() }
    if(k==='n') { if(!nextBtn.classList.contains('hidden')) nextQuestion() }
    if(k==='r') { if(!scoreContainerEl.classList.contains('hidden')) restartQuiz() }
    if(/^[1-4]$/.test(k)){
      const idx=Number(k)-1; const input=document.querySelector(`#opt${idx}`); if(input && !input.disabled){ input.checked=true }
    }
  });

  document.addEventListener('DOMContentLoaded',()=>{ 
      loadQuestion(); 
      updateLiveStatsBars(); 
      updateRing(); 
  });
  </script>
</body>
</html>